name: Debug Secrets

on: 
  workflow_dispatch: # บรรทัดนี้สำคัญ! ทำให้เรากดปุ่มรันเองได้ ไม่ต้องรอเวลา

jobs:
  check-keys:
    runs-on: ubuntu-latest
    steps:
      - name: Check Secrets Presence
        env:
          # ดึงค่ามาใส่ตัวแปร Environment ชั่วคราว
          API_KEY: ${{ secrets.ALPHA_VANTAGE_API_KEY }}
        run: |
          echo "กำลังตรวจสอบ Secret..."
          
          if [ -z "$API_KEY" ]; then
            echo "❌ ERROR: ไม่พบ Secret (ค่าว่างเปล่า)"
          else
            echo "✅ SUCCESS: พบ Secret แล้ว!"
            
            # เทคนิคแอบดู: ปริ้นท์ 4 ตัวแรก เพื่อเช็คว่าใช่คีย์ที่ถูกต้องไหม
            # (GitHub จะเซ็นเซอร์ถ้าสั่ง echo ตรงๆ เราเลยต้องตัดคำ)
            echo "ค่าขึ้นต้นด้วย: ${API_KEY:0:4}****" 
          fi